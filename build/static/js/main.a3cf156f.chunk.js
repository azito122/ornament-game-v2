(window["webpackJsonp2048-react"]=window["webpackJsonp2048-react"]||[]).push([[0],{175:function(e,t,n){e.exports=n(462)},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},462:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),o=n(174),s=n.n(o),r=(n(180),n(15)),l=n(18),c=n(27),u=n(26),h=n(28),f=function(){function e(t,n){Object(r.a)(this,e),this.x=void 0,this.y=void 0,this.x=t,this.y=n}return Object(l.a)(e,[{key:"onBoard",value:function(){return!(this.x<0||this.y<0||this.x>=11||this.y>=7)}}]),e}();function d(e,t){return Math.floor(Math.random()*(t-e)+e)}function v(e){return e[Math.floor(Math.random()*e.length)]}n(181);var p=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{onMouseOver:function(){e.props.handleHover(e.props.position)},onMouseLeave:function(){e.props.handleUnhover(e.props.position)},onClick:function(){e.props.handleClick(e.props.position,e.props.type)},className:"cell cell-type-".concat(this.props.type," cell-special-").concat(this.props.special," cell-status-").concat(this.props.status)},a.a.createElement("span",null))}}]),t}(a.a.Component),y=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"filling";Object(r.a)(this,e),this.type=void 0,this.special=void 0,this.status=void 0,this.type=t,this.special=n,this.status=i},m=(n(182),function(e){function t(e){var n;Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).buffer=void 0,n.hovered=void 0,n.targeted=void 0;var i=new y(0),a=Array(n.props.height).fill(Array(n.props.width).fill(i));return n.buffer=JSON.parse(JSON.stringify(a)),n.hovered=void 0,n.state={cells:a,locked:!1},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"cells"},this.state.cells.map((function(t,n){return a.a.createElement("div",{key:n,className:"cells-row"},t.map((function(t,i){return a.a.createElement(p,{status:t.status,position:new f(i,n),key:4*n+i,type:t.type,handleClick:function(t){e.handleClick(t)},handleHover:function(t){e.handleHover(t)},handleUnhover:function(t){e.handleUnhover(t)},special:t.special})})))})))}},{key:"componentDidMount",value:function(){this.fillCells()}},{key:"handleUnhover",value:function(e){this.hovered=void 0,this.targeted&&this.targeted.length>=3&&(this.untargetByPositions(this.targeted),this.state.locked||this.flushBuffer()),this.targeted=void 0}},{key:"handleHover",value:function(e){this.hovered=e,this.targeted=this.findGroupPositions(e),this.targeted.length>=3&&(this.targetByPositions(this.targeted),this.state.locked||this.flushBuffer())}},{key:"handleClick",value:function(e){var t=this;if(!this.state.locked&&this.targeted){var n=this.targeted;n.length>=3?(this.props.addScore(n.length),this.lock((function(){t.boomByPositions(n)}))):this.resetBuffer()}}},{key:"fillCells",value:function(e){var t,n=this;"undefined"!==typeof e&&(t=(t=Array(e>3?e-1:2).fill(null)).map((function(e,t){return n.getRandomTileType()})));this.buffer.forEach((function(e){e.forEach((function(i,a){0===i.type&&(e[a]=n.fillCell(t))}))})),this.flushBuffer(),this.unlock(),"undefined"!==typeof this.hovered&&this.handleHover(this.hovered)}},{key:"fillCell",value:function(e){var t=this.getRandomTileType();if("undefined"!==typeof e)v(e);var n="";return d(1,100)<5&&(n=v(["borg","gold"])),new y(t,n)}},{key:"targetByPositions",value:function(e){var t=this;e.forEach((function(e){t.getCell(e).status="targeted"}))}},{key:"untargetByPositions",value:function(e){var t=this;e.forEach((function(e){t.getCell(e).status=""}))}},{key:"findGroupPositions",value:function(e){var t,n=this.getCell(e).type,i=(t=this.buffer,JSON.parse(JSON.stringify(t)));return this.findMatchingAdjacent(i,e,n,[])}},{key:"findTypePositions",value:function(e){var t=[];return this.buffer.forEach((function(n,i){n.forEach((function(n,a){n.type===e&&t.push(new f(a,i))}))})),t}},{key:"findMatchingAdjacent",value:function(e,t,n,i){var a=this;return 0===e[t.y][t.x].type?i:(i.push(t),e[t.y][t.x].type=0,this.getAdjacentPositions(t).forEach((function(t){a.getCell(t).type===n&&i.concat(a.findMatchingAdjacent(e,t,n,i))})),i)}},{key:"getAdjacentPositions",value:function(e){var t=e.x,n=e.y;return[new f(t+1,n),new f(t-1,n),new f(t,n+1),new f(t,n-1)].filter((function(e){return e.onBoard()}))}},{key:"boomByPositions",value:function(e){var t=this,n=[];e.forEach((function(e){var i=t.getCell(e);"borg"===i.special?n=n.length>0?n:t.findTypePositions(i.type):"gold"===i.special&&t.props.addScore(15)})),(e=e.concat(n)).forEach((function(e){t.getCell(e).status="booming"})),this.flushBuffer(),setTimeout((function(){e.forEach((function(e){var n=t.getCell(e);n.type,n.special;n.type=0,n.special="",n.status="booming"})),t.flushBuffer(),t.fillCells.bind(t)(e.length)}),500)}},{key:"boomByType",value:function(e){this.boomByPositions(this.findTypePositions(e)),this.flushBuffer()}},{key:"getCell",value:function(e){return this.buffer[e.y][e.x]}},{key:"flushBuffer",value:function(){var e=JSON.parse(JSON.stringify(this.buffer));this.setState((function(t){return{cells:e}}))}},{key:"resetBuffer",value:function(){this.buffer=JSON.parse(JSON.stringify(this.state.cells))}},{key:"getRandomTileType",value:function(){var e=this.props.level+4>=5?5:this.props.level+4,t=d(1,this.props.level+4);return t>=e?e:t}},{key:"lock",value:function(e){this.setState((function(){return{locked:!0}}),e)}},{key:"unlock",value:function(e){this.setState((function(){return{locked:!1}}),e)}}]),t}(a.a.Component)),g=(n(183),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={level:1,score:0,over:!1,won:!1,addition:0},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"app"},a.a.createElement("div",{className:"game-header"},a.a.createElement("h1",{className:"title"},"Nature's Ornaments"),a.a.createElement("div",{className:"score-container"},this.state.score),a.a.createElement("div",{className:"level-container"},this.state.level)),a.a.createElement("div",{className:"game-intro"}),a.a.createElement("div",{className:"game-container"},(this.state.won||this.state.over)&&a.a.createElement("div",{className:"game-message game-".concat(this.state.won?"won":this.state.over&&"over")},a.a.createElement("p",null,this.state.won?"You win!":"Board over!"),a.a.createElement("div",{className:"actions"})),a.a.createElement(m,{width:11,height:7,addScore:function(t){e.addScore(t)},level:this.state.level})),a.a.createElement("p",{className:"game-explanation"}))}},{key:"addScore",value:function(e){var t=[0,1e3,2100,3300,4600],n=(e<=4?10*e:e<=7?15*e:e<=10?20*e:25*e)+this.state.score;this.setState((function(e){var i=e.level;return t.reduce((function(e,t,a){return n>=e&&n<=t&&(i=a),t})),{score:n,level:i}}))}}]),t}(a.a.Component));n(184);s.a.render(a.a.createElement(g,null),document.getElementById("root"))}},[[175,1,2]]]);
//# sourceMappingURL=main.a3cf156f.chunk.js.map